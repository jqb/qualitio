<div class="grid_16">
  <div id="application-view-menu">
    <a href="#requirement/{{ requirement.pk }}/details/">details</a> |
    <span class="active">edit</span> |
    <a href="#requirement/{{ requirement.pk }}/testcases/">test cases</a> |
  </div>
</div>

<script type="text/javascript"> 
  function showResponse(response, statusText, xhr, $form)  { 
    if(!response.success) {
      $(response.message).each(function(i, element) {
        $("#"+element[0]+"_wrapper").addClass("ui-state-error");
        $("#"+element[0]+"_wrapper .error").append(element[1]);
      });
    } else {
      $('#application-tree').jstree('refresh',-1);
    }
  }

$(document).ready(function() { 
  $('#requirement_form').ajaxForm({ 
    success: showResponse 
  });
}); 
</script> 

<form id="requirement_form" action="/require/ajax/requirement/{{ requirement.id }}/edit/valid/" method="post"> 
  <div class="grid_16">
    <div class="application-view-content">
      <h1>edit: {{ requirement.name }}</h1>
      {% csrf_token %}
      {% for field in requirement_form %}
      <div id="{{ field.html_name }}_wrapper" class="field-wrapper">
        {{ field.label_tag }}: <span class="error"></span>
        {{ field }}
      </div>
      {% endfor %}
    </div>
  </div>
  
  <div id="application-view-footer" class="grid_16 clearfix">
    <div class="grid_8 left">
      <input type="submit" name="Executed" value="Delete" />
    </div>
    <div class="grid_8 right">
      <input type="submit" name="Executed" value="Save" />
    </div>
  </div>
</form>
